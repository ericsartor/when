<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Eric Sartor">
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Focus - When</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../style.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Focus";
    var mkdocs_page_input_path = "features\\focus.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> When</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../overview/">Overview</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Layouts</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../layouts/qwerty/">QWERTY</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Features</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../shortcuts/">Shortcuts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../events/">Events</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Focus</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#focus-constraints">Focus Constraints</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#element">Element</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#id">id</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#class">class</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#reacting-to-focus-changes">Reacting To Focus Changes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#setting-focus-explicitly">Setting Focus Explicitly</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../groups/">Groups</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../modes/">Modes</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Types</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../types/ShortcutController/">ShortcutController</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../types/ShortcutHandler/">ShortcutHandler</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../types/Whenable/">Whenable</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Whenable Methods</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/When/">When()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/Then/">Then()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/ModeIs/">ModeIs()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/IsFocused/">IsFocused()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/IsInput/">IsInput()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/IsPressed/">IsPressed()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/IsReleased/">IsReleased()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/IsHeldFor/">IsHeldFor()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/Within/">Within()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/SecondsMilliseconds/">Milliseconds() / Seconds()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/IsExecuted/">IsExecuted()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/Run/">Run()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../whenable-methods/Execute/">Execute()</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Shortcut Qualifier Methods</span></p>
                <ul>
                    <li class="toctree-l1"><a class="" href="../../types/ShortcutController/#allowdefault">AllowDefault()</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../types/ShortcutController/#ininput">InInput()</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../types/ShortcutController/#once">Once()</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Global Methods</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/setMode/">When.setMode()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/clearMode/">When.clearMode()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/newGroup/">When.newGroup()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/quiet/">When.quiet()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/togglepauseunpause/">When.toggle() / When.pause() / When.unpause()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/loadLayout/">When.loadLayout()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/keyGroups/">When.keyGroups()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/setFocus/">When.setFocus()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/focusChanges/">When.focusChanges()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/setHeldInterval/">When.setHeldInterval()</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../global-methods/documentation/">When.documentation()</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">When</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Features &raquo;</li>
        
      
    
    <li>Focus</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/ericsartor/when/edit/master/docs/features/focus.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="focus">Focus</h1>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#focus-constraints">Focus Constraints</a><ul>
<li><a href="#element">Element</a></li>
<li><a href="#id">id</a></li>
<li><a href="#class">class</a></li>
</ul>
</li>
<li><a href="#reacting-to-focus-changes">Reacting To Focus Changes</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>The <strong>focus</strong> system in <em>When</em> allows you to simulate the same experience of window/app focus that users get on their operating systems.</p>
<p>This means that when a user clicks on part of the page, you can control what <em>When</em> considers to be in "focus".  It's achieved using the special CSS <code>when-focus</code> class.  Simply attach that class to any element you want to enable the <strong>focus</strong> feature on.</p>
<p>When an element with the <code>when-focus</code> class name is clicked, or when one of its children are clicked, <em>When</em> considers that element to be in focus.</p>
<p>Generally, you would use this on the parts of your app that are clearly distinct, such as on pop-up type components, sections of your page that are visually separate from each other, or window/overlay elements.</p>
<p>Until an element (or child of) with the <code>when-focus</code> class is clicked, the focus is considered to be <code>null</code>.  If an element is ever clicked that doesn't have the <code>when-focus</code> class and none of it's ancestors have it, the focus is reset to <code>null</code>.  When the focus is <code>null</code>, no shortcut with a <strong>focus</strong> constraint will work.</p>
<p>This feature can be very powerful, but is made even more robust by <em>When</em> exposing a way to tie into the <strong>focus</strong> system itself. With this, your app can react to the focus changing.  You might use this to change your styles slightly when an element gains or loses focus, such as by altering opacity or adding a border or background color.</p>
<h2 id="focus-constraints">Focus Constraints</h2>
<h3 id="element">Element</h3>
<p>One way to specify a focus constraint on a shortcut to is pass a reference to the element itself to <a href="../../whenable-methods/When">When()</a>.</p>
<pre><code class="xml">&lt;div class=&quot;when-focus&quot;&gt;
  Content...
&lt;/div&gt;
</code></pre>

<pre><code class="javascript">const div = document.getElementsByTagName('div')[0];
When(div).IsFocused().Then('a').IsPressed().Execute((context) =&gt; {
  const content = context.focusedElement.textContent;
  console.log(content);
});
</code></pre>

<h3 id="id">id</h3>
<p>Another way to add a focus constraint is with the <code>id:</code> selector.</p>
<p>Note that the target element <em>doesn't</em> have to exist at the time the shortcut is created, but <em>When</em> will log a warning in that case.  It will also log a warning if the element exists but the <code>when-focus</code> class is not present on it.</p>
<pre><code class="xml">&lt;div id=&quot;test&quot; class=&quot;when-focus&quot;&gt;
  Content...
&lt;/div&gt;
</code></pre>

<pre><code class="javascript">When('id:test').IsFocused().Then('a').IsPressed().Execute((context) =&gt; {
  const content = context.focusedElement.textContent;
  console.log(content);
});
</code></pre>

<h3 id="class">class</h3>
<p>Finally, you can use the <code>class:</code> selector to select multiple elements.</p>
<p>Again, the elements need not exist at the moment you create the shortcut, but <em>When</em> will log a warning if <em>any</em> of the elements that do exist are missing the <code>when-focus</code> class.</p>
<pre><code class="xml">&lt;div class=&quot;card when-focus&quot;&gt;
  &lt;p&gt;Card 1 content...&lt;p/&gt;
&lt;/div&gt;
&lt;div class=&quot;card when-focus&quot;&gt;
  &lt;p&gt;Card 2 content...&lt;p/&gt;
&lt;/div&gt;
&lt;div class=&quot;card when-focus&quot;&gt;
  &lt;p&gt;Card 3 content...&lt;p/&gt;
&lt;/div&gt;
</code></pre>

<pre><code class="javascript">When('class:card').IsFocused().Then('a').IsPressed().Execute((context) =&gt; {
  const content = context.focusedElement.getElementsByTagName('p')[0].textContent;
  console.log(content);
});
</code></pre>

<h2 id="reacting-to-focus-changes">Reacting To Focus Changes</h2>
<p>A focus system is only really useful when the user understands which part of the page is in focus.  To facilitate this, <em>When</em> exposes the <a href="../../global-methods/focusChanges">When.focusChanges()</a> utility for registering focus change handlers.</p>
<p>You can register multiple handlers if required, but generally only one will be necessary.</p>
<p>A modified version of the <code>class:</code> selector example can be seen below utilizing <a href="../../global-methods/focusChanges">When.focusChanges()</a>.</p>
<pre><code class="css">.card {
  opacity: 0.5;
}

.focused {
  opacity: 1;
}
</code></pre>

<pre><code class="xml">&lt;div class=&quot;card when-focus&quot;&gt;
  &lt;p&gt;Card 1 content...&lt;p/&gt;
&lt;/div&gt;
&lt;div class=&quot;card when-focus&quot;&gt;
  &lt;p&gt;Card 2 content...&lt;p/&gt;
&lt;/div&gt;
&lt;div class=&quot;card when-focus&quot;&gt;
  &lt;p&gt;Card 3 content...&lt;p/&gt;
&lt;/div&gt;
</code></pre>

<pre><code class="javascript">When('class:card').IsFocused().Then('a').IsPressed().Execute((context) =&gt; {
  const content = context.focusedElement.getElementsByTagName('p')[0].textContent;
  console.log(content);
});

When.focusChanges((newFocusElement, prevFocusElement) =&gt; {
  if (newFocusElement) {
    newFocusElement.classList.add('focused');
  }
  if (prevFocusElement) {
    prevFocusedElement.classList.remove('focused');
  }
});
</code></pre>

<h2 id="setting-focus-explicitly">Setting Focus Explicitly</h2>
<p>You can change the focus programmatically using <a href="../../global-methods/setFocus">When.setFocus()</a>.  Simply provide an <code>HTMLElement</code> as the first argument and make sure it has the <code>when-focus</code> class (it wouldn't be a valid focusable element otherwise), and the focus will be updated!</p>
<p>This could be used if you implement a keyboard shortcut that is meant to change focus, similar to Alt + Tab on Windows and Cmd + Tab on Mac.</p>
<p><strong>Note</strong>: this will still trigger all your <a href="../../global-methods/focusChanges">When.focusChanges()</a> handlers.</p>
<pre><code class="xml">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;div2&quot; class=&quot;when-focus&quot;&gt;&lt;/div&gt;
</code></pre>

<pre><code class="javascript">const div1 = document.getElementById('div1');
const div2 = document.getElementById('div2');

// throws error
When.setFocus(div1);

// succeeds
When.setFocus(div2);
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../groups/" class="btn btn-neutral float-right" title="Groups">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../events/" class="btn btn-neutral" title="Events"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/ericsartor/when/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../events/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../groups/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../style.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
