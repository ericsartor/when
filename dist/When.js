!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.When=t.commands=void 0;var i=n(4),r=n(1),s=n(5),a=n(8),o=n(9),u=n(10);function c(e){if(null===this.n)throw new a.WhenError("n value was null",this);if(null===this.identifier)throw new a.WhenError("identifier value was null",this);switch(this.nType){case"held":this.events.push({type:"pressed",key:i.keys[o.getKeyFromIdentifier(this.identifier)],timestamp:0,modifiers:u.getModifiersFromIdentifier(this.identifier)}),this.events.push({type:"held",key:i.keys[o.getKeyFromIdentifier(this.identifier)],timestamp:0,duration:e*this.n,modifiers:u.getModifiersFromIdentifier(this.identifier)});break;case"constraint":this.timeConstraint=e*this.n}}function d(e){if(void 0!==e&&"string"!=typeof e&&!(e instanceof HTMLElement))throw new a.WhenError("When() must be passed either a string identifier for a key (optionally with modifiers), a string name for a command or an HTMLElement for focus related functionality.  Instead, a value of type ["+typeof e+"] was receieved: "+e);return{identifier:"string"!=typeof e?null:e.toLowerCase(),element:"string"==typeof e?null:e,events:[],timeConstraint:null,focusRequired:!1,isCommand:!1,preventDefault:!1,n:null,nType:null,once:!1,shortcut:null,lastCalledFunctionName:"When()",Then:function(e){if(a.warnAboutChainOrder("Then()",this,["IsFocused()","IsPressed()","IsReleased()","Seconds()","Milliseconds()"]),"string"!=typeof e)throw new a.WhenError("Then() must be called with a string key identifier (optionally with modifiers).",this);return this.identifier=e.toLowerCase(),this.lastCalledFunctionName="Then()",this},IsFocused:function(){if(a.warnAboutChainOrder("IsFocused()",this,["When()"]),!this.element)throw new a.WhenError("IsFocused() cannot be called until When() has received an HTMLElement",this);if(!this.element.classList||!this.element.classList.contains("when-focus"))throw new a.WhenError('IsFocused() was called, but the HTMLElement provided to When() did not have the "when-focus" class assigned to it.');return this.focusRequired=!0,this.lastCalledFunctionName="IsFocused()",this},IsExecuted:function(){if(a.warnAboutChainOrder("IsExecuted()",this,["When()"]),null===this.identifier)throw new a.WhenError("IsExecuted() cannot be called before a string command name has been passed to When().",this);return this.isCommand=!0,this.lastCalledFunctionName="IsExecuted()",this},IsPressed:function(){if(a.warnAboutChainOrder("IsPressed()",this,["When()","Then()"]),null===this.identifier)throw new a.WhenError("IsPressed() cannot be called before a string key identifier has been passed to When() or Then()",this);return i.validateKeyIdentifier(o.getKeyFromIdentifier(this.identifier)),this.events.push({type:"pressed",key:i.keys[o.getKeyFromIdentifier(this.identifier)],timestamp:0,modifiers:u.getModifiersFromIdentifier(this.identifier)}),this.lastCalledFunctionName="IsPressed()",this},IsReleased:function(){if(a.warnAboutChainOrder("IsReleased()",this,["When()","Then()"]),null===this.identifier)throw new a.WhenError("IsReleased() cannot be called before a string key identifier has been passed to When() or Then()",this);return i.validateKeyIdentifier(o.getKeyFromIdentifier(this.identifier)),this.events.push({type:"released",key:i.keys[o.getKeyFromIdentifier(this.identifier)],timestamp:0,modifiers:u.getModifiersFromIdentifier(this.identifier)}),this.lastCalledFunctionName="IsReleased()",this},IsHeldFor:function(e){if(a.warnAboutChainOrder("IsHeldFor()",this,["When()","Then()"]),null===this.identifier)throw new a.WhenError("IsHeldFor() cannot be called before a string key identifier has been passed to When() or Then()",this);if(isNaN(e)||0===e)throw new a.WhenError("IsHeldFor() expects to receive a number greater than 0, but received a value of type ["+typeof e+"]: "+e,this);return i.validateKeyIdentifier(o.getKeyFromIdentifier(this.identifier)),this.n=e,this.nType="held",this.lastCalledFunctionName="IsHeldFor()",this},Within:function(e){if(a.warnAboutChainOrder("Within()",this,["IsPressed()","IsReleased()","Seconds()","Milliseconds()"]),isNaN(e)||0===e)throw new a.WhenError("Within() expects to receive a number greater than 0, but received a value of type ["+typeof e+"]: "+e,this);return this.n=Number(e),this.nType="constraint",this.lastCalledFunctionName="Within()",this},Milliseconds:function(){if(a.warnAboutChainOrder("Milliseconds()",this,["IsHeldFor()","Within()"]),!this.n)throw new a.WhenError("Milliseconds() cannot be called before a number greater than 0 has been passed to IsHeldFor() or Within()",this);return c.call(this,1),this.lastCalledFunctionName="Milliseconds()",this},Seconds:function(){if(a.warnAboutChainOrder("Seconds()",this,["IsHeldFor()","Within()"]),!this.n)throw new a.WhenError("Seconds() cannot be called before a number greater than 0 has been passed to IsHeldFor() or Within()",this);return c.call(this,1e3),this.lastCalledFunctionName="Seconds()",this},PreventDefault:function(){return a.warnAboutChainOrder("PreventDefault()",this,["IsPressed()","IsReleased()","Seconds()","Milliseconds()"]),this.preventDefault=!0,this.lastCalledFunctionName="PreventDefault()",this},Execute:function(e){if(a.warnAboutChainOrder("Execute()",this,["IsPressed()","IsReleased()","Seconds()","Milliseconds()","PreventDefault()"]),"string"!=typeof e)throw new a.WhenError("Execute() must be called with a string command name as the only argument.",this);if(e=e.toLowerCase(),void 0===t.commands[e])throw new a.WhenError("Execute() was called with a command name not yet registered by a call to When([command_name]).IsExecuted().Run([function]): "+e,this);return this.lastCalledFunctionName="Execute()",new r.Shortcut({timeline:this.events,command:e,timeConstraint:this.timeConstraint,focusElement:this.focusRequired?this.element:null,preventDefault:this.preventDefault})},Run:function(e){if(a.warnAboutChainOrder("Run()",this,["IsExecuted()"]),null===this.identifier)throw new a.WhenError("Run() cannot be called before a string key identifier has been passed to When().",this);if("function"!=typeof e)throw new a.WhenError("Run() must be called with a function as its first and only argument.",this);if(!this.isCommand)throw new a.WhenError("Run() must be called after a call to IsExecuted().",this);t.commands[this.identifier.toLowerCase()]=e,this.lastCalledFunctionName="Run()"},FocusChanges:function(e){a.warnAboutChainOrder("FocusChanges()",this,["When()"]),s.focusHandlers.push(e),this.lastCalledFunctionName="FocusChanges()"}}}t.commands={},t.When=d,d.Documentation=function(){var e=[];return r.Shortcut.map.forEach((function(t){var n=t.timeline.map((function(e){var t=e.modifiers,n=(t.alt?"alt+":"")+(t.ctrl?"ctrl+":"")+(t.meta?"meta+":"")+(t.shift?"shift+":"");switch(e.type){case"pressed":return", &darr;"+n+i.keyToString(e.key);case"released":return", &uarr;"+n+i.keyToString(e.key);case"held":return" (hold "+e.duration/1e3+"s)"}})).join("").slice(2);t.timeConstraint&&(t.timeConstraint<1e3?n+=" (within "+t.timeConstraint+"ms)":n+=" (within "+(t.timeConstraint/1e3).toFixed(2)+"s)");e.push({combination:n,command:t.command})})),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shortcut=void 0;var i=n(2),r=n(3),s=n(0),a=n(8),o=function(){function e(t){var n=t.timeline,s=t.command,a=t.preventDefault,o=t.once,u=t.timeConstraint,c=t.focusElement;this.lastTriggeredEventId=null,this.active=!0,this.preventDefault=!1,this.once=!1,this.timeConstraint=null,this.focusElement=null,this.id=e.idCounter++,e.map.set(this.id,this),this.timeline=n,this.command=s,this.preventDefault=a||this.preventDefault,this.once=o||this.once,this.timeConstraint=u||this.timeConstraint,this.focusElement=c||this.focusElement,this.preventDefault&&this.timeline.forEach((function(e){var t=r.generateEventKeyString(e);if(i.preventDefaultShortcuts.has(t)){var n=i.preventDefaultShortcuts.get(t);i.preventDefaultShortcuts.set(t,n+1)}else i.preventDefaultShortcuts.set(t,1)}))}return e.prototype.delete=function(){e.map.delete(this.id),this.preventDefault&&this.timeline.forEach((function(e){var t=r.generateEventKeyString(e);if(i.preventDefaultShortcuts.has(t)){var n=i.preventDefaultShortcuts.get(t);i.preventDefaultShortcuts.set(t,n-1)}}))},e.prototype.pause=function(){this.active=!1},e.prototype.unpause=function(){this.active=!0},e.prototype.toggle=function(){this.active=!this.active},e.prototype.trigger=function(){if("function"!=typeof s.commands[this.command])throw new a.WhenError('command "'+this.command+"\" hasn't been been registered as a function with When([command_name]).Run([function])");s.commands[this.command](void 0)},e.prototype.Once=function(){return this.once=!0,this},e.idCounter=0,e.map=new Map,e}();t.Shortcut=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkPreventDefault=t.preventDefaultShortcuts=void 0;var i=n(3);t.preventDefaultShortcuts=new Map,t.checkPreventDefault=function(e,n){var r=i.generateEventKeyString(e);t.preventDefaultShortcuts.has(r)&&(t.preventDefaultShortcuts.get(r)>0&&n.preventDefault())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateEventKeyString=void 0,t.generateEventKeyString=function(e){var t=e.modifiers;return(t.alt?"alt":"")+(t.ctrl?"ctrl":"")+(t.meta?"meta":"")+(t.shift?"shift":"")+e.key}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeyIdentifier=t.keySuggestions=t.keyToString=t.modifierKeys=t.keyStatus=t.keys=void 0;var i=n(8),r=(!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/"),"undefined"!=typeof InstallTrigger),s=(/constructor/i.test(window.HTMLElement)||(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),!!document.documentMode),a=!s&&!!window.StyleMedia,o=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);o&&navigator.userAgent.indexOf("Edg");t.keys={ctrl:17,alt:18,shift:16,left_meta:91,meta:91,right_meta:92,escape:27,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130,scroll_lock:145,pause_break:19,context_menu:93,"`":192,grave_accent:192,tilde:192,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,num0:48,hyphen:189,"=":187,equals:187,backspace:8,tab:9,caps_lock:20,space:32,"[":219,left_square_bracket:219,"]":221,right_square_bracket:221,"\\":220,backslash:220,backward_slash:220,";":186,semicolon:186,"'":222,apostophe:222,",":188,comma:188,period:190,forward_slash:191,enter:13,insert:45,home:36,page_up:33,delete:46,end:35,page_down:34,arrow_up:38,arrow_right:39,arrow_down:40,arrow_left:37,num_lock:144,numpad_divide:111,numpad_multiply:106,numpad_subtract:109,clear:12,numpad_add:107,numpad_decimal:110,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},r?(t.keys.hyphen=173,t.keys["="]=61,t.keys.equals=61,t.keys[";"]=59,t.keys.semicolon=59,t.keys.right_meta=91):a&&(t.keys.clear=101),t.keyStatus={},Object.keys(t.keys).forEach((function(e){t.keyStatus[t.keys[e]]={pressed:!1,timestamp:null}})),t.modifierKeys=[t.keys.alt,t.keys.ctrl,t.keys.left_meta,t.keys.right_meta,t.keys.shift],t.keyToString=function(e){var n=[];for(var i in t.keys)t.keys[i]===e&&n.push(i);return n.reduce((function(e,t){return Math.min(e.length,t.length)?e:t}),n[0])||null},t.keySuggestions=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return'Numbers should be specified as either "num'+e+'" or "numpad'+e+'"';case".":return'Instead of ".", you must use either "period" or "numpad_decimal", as these are interpreted as two different keys';case"-":return'Instead of "-", you must either use "hyphen" or "numpad_subtract", as these are interpreted as two different keys';case"/":return'Instead of "/", you must either use "forward_slash" or "numpad_divide", as these are interpreted as two different keys';case"*":return'Instead of "*", you must use numpad_multiply, unless you meant to use "num8"';case"+":return'Instead of "+", you must use numpad_add, unless you meant to use "="';case"~":case"!":case"@":case"#":case"$":case"%":case"^":case"&":case"(":case")":case"_":case"{":case"}":case"|":case":":case'"':case"<":case">":case"?":return'The character "'+e+'" is not recognized, you probably meant to use the other character on that key';default:return'Unrecognized key identifier "'+e+'"'}},t.validateKeyIdentifier=function(e){if(void 0===t.keys[e]){var n=t.keySuggestions(e);if(n)throw new i.WhenError(""+n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.focusedElement=t.focusHandlers=void 0,t.focusHandlers=[],t.focusedElement=null,window.addEventListener("click",(function(e){if(null!==e.target){var n=t.focusedElement,i=e.target;if(i.classList&&i.classList.contains("when-focus"))t.focusedElement=i;else{for(t.focusedElement=i.parentNode;t.focusedElement&&t.focusedElement.classList&&!t.focusedElement.classList.contains("when-focus");)t.focusedElement=t.focusedElement.parentNode;t.focusedElement&&t.focusedElement.classList||(t.focusedElement=null)}t.focusedElement!==n&&t.focusHandlers.forEach((function(e){return e(t.focusedElement,n)}))}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(7);var i=n(0);window.When=i.When,console.log("Hello from When.js!")},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,r++)i[r]=s[a];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.emitEvent=t.addNewEvent=t.eventHistory=void 0;var s=n(1),a=n(0),o=n(2),u=n(4),c=n(5),d=n(11),l=n(8),h=0;t.eventHistory=[],t.addNewEvent=function(e){var n=h++;t.eventHistory.push(i(i({},e),{id:n}))};var f=null,m=null;t.emitEvent=function(e){void 0!==e&&t.addNewEvent(e),s.Shortcut.map.forEach((function(e){if(e.active&&(!e.focusElement||e.focusElement===c.focusedElement)){for(var n=!1,i=r(e.timeline),s=[],o=0;o<t.eventHistory.length&&s.length!==e.timeline.length;o++){var u=i[i.length-1],h=t.eventHistory[t.eventHistory.length-1-o];if(e.lastTriggeredEventId===h.id){n=!0;break}if(0===o){if(!d.checkEventMatch(u,h)){n=!0;break}s.unshift(h),i.pop()}else{var p=s[s.length-1].timestamp-h.timestamp;if(null!==e.timeConstraint&&e.timeConstraint>0&&p>e.timeConstraint){n=!0;break}var y=h.type===u.type;if(y&&d.checkEventMatch(u,h)){s.unshift(h),i.pop();continue}if(y){n=!0;break}}}if(!n&&s.length===e.timeline.length){if(null!==e.timeConstraint&&e.timeConstraint>0){var v=s.shift(),w=s.pop();if(void 0!==w&&void 0!==v&&w.timestamp-v.timestamp>e.timeConstraint&&(n=!0),n)return}var g=s[s.length-1],b=g.type,k="released"===b?m:f;if("function"!=typeof a.commands[e.command])throw new l.WhenError('command "'+e.command+"\" hasn't been been registered as a function with When([command_name]).Run([function])");a.commands[e.command]({event:k,pressDuration:"held"===b?g.duration:void 0}),e.once&&e.delete(),e.lastTriggeredEventId=s[s.length-1].id}}}))},window.addEventListener("keydown",(function(e){var n={type:"pressed",key:e.which,timestamp:performance.now(),modifiers:{shift:e.shiftKey,alt:e.altKey,ctrl:e.ctrlKey,meta:e.metaKey}};o.checkPreventDefault(n,e),!0!==u.keyStatus[e.which].pressed&&(u.modifierKeys.includes(e.which)||(f=e,t.emitEvent(n)),u.keyStatus[e.which].pressed=!0,u.keyStatus[e.which].timestamp=performance.now())})),window.addEventListener("keyup",(function(e){if(!1!==u.keyStatus[e.which].pressed)if(u.modifierKeys.includes(e.which))u.keyStatus[e.which].pressed=!1,u.keyStatus[e.which].timestamp=null;else{var n={type:"released",key:e.which,timestamp:performance.now(),modifiers:{shift:e.shiftKey,alt:e.altKey,ctrl:e.ctrlKey,meta:e.metaKey}};m=e,t.emitEvent(n),u.keyStatus[e.which].pressed=!1,u.keyStatus[e.which].timestamp=null}})),setInterval((function(){Object.keys(u.keyStatus).forEach((function(e){if(e=Number(e),u.keyStatus[e].pressed&&null!==u.keyStatus[e].timestamp){var n=performance.now()-u.keyStatus[e].timestamp;if(!(n<500)){for(var i={shift:u.keyStatus[u.keys.shift].pressed,alt:u.keyStatus[u.keys.alt].pressed,ctrl:u.keyStatus[u.keys.ctrl].pressed,meta:u.keyStatus[u.keys.left_meta].pressed||u.keyStatus[u.keys.right_meta].pressed},r=null,s=t.eventHistory.length-1;s>=0;s--){var a=t.eventHistory[s];if(a.timestamp<u.keyStatus[e].timestamp)break;if(a.key===e)if("held"===a.type)if(a.modifiers.shift===i.shift&&a.modifiers.ctrl===i.ctrl&&a.modifiers.alt===i.alt&&a.modifiers.meta===i.meta){r=s;break}}null!==r?(t.eventHistory[r].duration=n,t.emitEvent()):t.emitEvent({type:"held",key:Number(e),duration:n,timestamp:performance.now(),modifiers:i})}}}))}),100)},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.warnAboutChainOrder=t.warn=t.WhenError=void 0;var s=function(e){function t(t,n){var i=this;return n&&(t+='\n\nLast identifier in chain: "'+n.identifier+'"',t+="\nLast succesful chain call: "+n.lastCalledFunctionName),(i=e.call(this,t)||this).name="WhenError",i.whenData=n||null,i}return r(t,e),t}(Error);t.WhenError=s,t.warn=function(e,t){e="WhenWarning: "+e,t&&(e+='\n\nLast identifier in chain: "'+t.identifier+'"',e+="\nLast succesful chain call: "+t.lastCalledFunctionName),console.warn(e),console.trace()},t.warnAboutChainOrder=function(e,n,i){i.includes(n.lastCalledFunctionName)||t.warn(e+" should not be called after "+n.lastCalledFunctionName+", though it may still work as intended.",n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyFromIdentifier=void 0;var i=n(8);t.getKeyFromIdentifier=function(e){var t=e.split("+").filter((function(e){return!["shift","alt","ctrl","meta"].includes(e)}));if(t.length>1)throw new i.WhenError("When: identifier for key contained more than one non-modifier key");return t[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModifiersFromIdentifier=void 0,t.getModifiersFromIdentifier=function(e){var t=e.split("+");return{shift:t.includes("shift"),alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkEventMatch=void 0;var i=n(8);t.checkEventMatch=function(e,t){if(e.key!==t.key||e.type!==t.type)return!1;if(e.modifiers.shift!==t.modifiers.shift||e.modifiers.meta!==t.modifiers.meta||e.modifiers.alt!==t.modifiers.alt||e.modifiers.ctrl!==t.modifiers.ctrl)return!1;if("held"===e.type){if(void 0===t.duration||void 0===e.duration)throw new i.WhenError('"held" event had undefined "duration" property');return!(t.duration<e.duration)}return!0}}]);